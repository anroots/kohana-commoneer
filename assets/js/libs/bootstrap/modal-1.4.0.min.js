!function(a){function h(){var b=this;if(this.isShown&&this.settings.keyboard){a(document).bind("keyup.modal",function(a){if(a.which==27){b.hide()}})}else if(!this.isShown){a(document).unbind("keyup.modal")}}function g(){this.$backdrop.remove();this.$backdrop=null}function f(c){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.settings.backdrop){var f=a.support.transition&&e;this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(document.body);if(this.settings.backdrop!="static"){this.$backdrop.click(a.proxy(this.hide,this))}if(f){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");f?this.$backdrop.one(b,c):c()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b,a.proxy(g,this)):g.call(this)}else if(c){c()}}function e(a){this.$element.hide().trigger("hidden");f.call(this)}function d(){var a=this,c=setTimeout(function(){a.$element.unbind(b);e.call(a)},500);this.$element.one(b,function(){clearTimeout(c);e.call(a)})}"use strict";var b;a(document).ready(function(){a.support.transition=function(){var a=document.body||document.documentElement,b=a.style,c=b.transition!==undefined||b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.MsTransition!==undefined||b.OTransition!==undefined;return c}();if(a.support.transition){b="TransitionEnd";if(a.browser.webkit){b="webkitTransitionEnd"}else if(a.browser.mozilla){b="transitionend"}else if(a.browser.opera){b="oTransitionEnd"}}});var c=function(b,c){this.settings=a.extend({},a.fn.modal.defaults,c);this.$element=a(b).delegate(".close","click.modal",a.proxy(this.hide,this));if(this.settings.show){this.show()}return this};c.prototype={toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=this;this.isShown=true;this.$element.trigger("show");h.call(this);f.call(this,function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.appendTo(document.body).show();if(d){c.$element[0].offsetWidth}c.$element.addClass("in");d?c.$element.one(b,function(){c.$element.trigger("shown")}):c.$element.trigger("shown")});return this},hide:function(b){b&&b.preventDefault();if(!this.isShown){return this}var c=this;this.isShown=false;h.call(this);this.$element.trigger("hide").removeClass("in");a.support.transition&&this.$element.hasClass("fade")?d.call(this):e.call(this);return this}};a.fn.modal=function(b){var d=this.data("modal");if(!d){if(typeof b=="string"){b={show:/show|toggle/.test(b)}}return this.each(function(){a(this).data("modal",new c(this,b))})}if(b===true){return d}if(typeof b=="string"){d[b]()}else if(d){d.toggle()}return this};a.fn.modal.Modal=c;a.fn.modal.defaults={backdrop:false,keyboard:false,show:false};a(document).ready(function(){a("body").delegate("[data-controls-modal]","click",function(b){b.preventDefault();var c=a(this).data("show",true);a("#"+c.attr("data-controls-modal")).modal(c.data())})})}(window.jQuery||window.ender)
